{% extends 'base.html' %}
{% block title %}FinSecure User Profile{% endblock %}

{% block header %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/lab5.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/lab5-utils.css') }}">
<style>
    /* Theme Override: SecureBank (Purple) */
    :root {
        --primary: #7c3aed;         /* Violet 600 */
        --primary-hover: #6d28d9;   /* Violet 700 */
        --accent: #8b5cf6;          /* Violet 500 */
    }
    .profile-sidebar .profile-card {
        border-top: 4px solid #a78bfa; /* Violet 400 */
    }
     .btn-tech-primary, .btn-upload-primary {
         background-color: var(--primary) !important;
    }
     .btn-tech-primary:hover, .btn-upload-primary:hover {
         background-color: var(--primary-hover) !important;
    }
</style>
{% endblock %}

{% block layout_container %}
<div class="container animate-fade-in lab5-container-split">
    <!-- Sidebar -->
    <div class="profile-sidebar">
        <div class="glass profile-card">
            <div class="avatar-lg" style="box-shadow: 0 0 0 4px #7c3aed, 0 10px 15px -3px rgba(0, 0, 0, 0.1);">
                {% if avatar %}
                <img src="{{ avatar }}" alt="User Avatar">
                {% else %}
                <div class="avatar-placeholder-icon" style="color:#a78bfa;">üë§</div>
                {% endif %}
            </div>
            
            <h3 class="profile-name">{{ username }}</h3>
            <p class="profile-badge" style="background:#f5f3ff; color:#5b21b6; border-color:#ddd6fe;">Platinum Member</p>
            
            <div class="profile-nav">
                <a href="{{ url_for('lab5') }}" class="btn-tech-outline nav-sidemenu-item">
                    <span class="menu-icon">‚¨ÖÔ∏è</span> Exit Lab
                </a>
                <a href="{{ url_for('lab5_2_c') }}" class="btn-tech-outline nav-sidemenu-item">
                    <span class="menu-icon">üè¶</span> Dashboard
                </a>
                <a href="#" class="btn-tech-outline nav-sidemenu-item nav-sidemenu-active" style="border-color:#8b5cf6; background:#f5f3ff; color:#5b21b6;">
                    <span class="menu-icon">üìã</span> Verification
                </a>
                <a href="{{ url_for('lab5_2_c_logout') }}" class="btn-tech-outline nav-sidemenu-item nav-sidemenu-danger">
                    <span class="menu-icon">üîê</span> Secure Logout
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="profile-main">
        <div class="glass content-card">
            <div class="content-header">
                <div>
                    <h1 class="content-title">Identity Verification (KYC)</h1>
                    <p class="auth-subtitle">Upload documents to increase your withdrawal limits.</p>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="upload-section">
                <h3 class="section-title">
                    <span class="section-icon" style="color:#5b21b6; background:#ede9fe; border-color:#c4b5fd;">üÜî</span> 
                    Upload ID / Passport
                </h3>

                {% if message %}
                <div class="upload-message-success">
                    {{ message }}
                </div>
                {% endif %}
                
                {% if error %}
                <div class="upload-message-error">
                    {{ error }}
                </div>
                {% endif %}

                <form action="{{ url_for('lab5_2_c_upload') }}" method="POST" enctype="multipart/form-data">
                    <div class="upload-zone" onclick="document.getElementById('avatar-input').click()">
                        <div class="upload-placeholder-icon" style="color:#a78bfa;">üìÇ</div>
                        <p class="upload-text-main">Select Document</p>
                        <p class="upload-text-sub">Please ensure your document is a valid image file.</p>
                        <input type="file" name="avatar" id="avatar-input" class="d-none" onchange="this.form.submit()">
                    </div>
                    
                    <div class="upload-actions">
                        <button type="button" class="btn-upload-primary" onclick="document.getElementById('avatar-input').click()">
                            <span>‚¨ÜÔ∏è</span> Verify Identity
                        </button>
                    </div>
                </form>
            </div>

            <!-- Read Only Info -->
            <div class="info-grid">
                <div class="form-group">
                    <label class="form-label">Client Status</label>
                    <input type="text" class="form-input input-readonly" value="Pending Verification" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Daily Limit</label>
                    <input type="text" class="form-input input-readonly" value="$5,000.00" readonly>
                </div>
            </div>
            
        </div>
    </div>
</div>
{% endblock %}
