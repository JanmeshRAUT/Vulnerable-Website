{% extends 'base.html' %}
{% block title %}Driver Dashboard - Global Logistics{% endblock %}

{% block header %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/lab5.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/lab5-utils.css') }}">
<style>
    /* Theme Override: Global Logistics (Orange) */
    :root {
        --primary: #f97316;
        --primary-hover: #ea580c;
        --accent: #fb923c;
    }
    .profile-sidebar .profile-card {
        border-top: 4px solid #fdba74; /* Orange 300 */
    }
    .btn-tech-primary, .btn-upload-primary {
         background-color: var(--primary) !important;
    }
    .btn-tech-primary:hover, .btn-upload-primary:hover {
         background-color: var(--primary-hover) !important;
    }
</style>
{% endblock %}

{% block layout_container %}
<div class="container animate-fade-in lab5-container-split">
    <!-- Sidebar -->
    <div class="profile-sidebar">
        <div class="glass profile-card">
            <div class="avatar-lg" style="box-shadow: 0 0 0 4px #f97316, 0 10px 15px -3px rgba(0, 0, 0, 0.1);">
                {% if avatar %}
                <img src="{{ avatar }}" alt="User Avatar">
                {% else %}
                <div class="avatar-placeholder-icon" style="color:#fdba74;">üì¶</div>
                {% endif %}
            </div>
            
            <h3 class="profile-name">{{ username }}</h3>
            <p class="profile-badge" style="background:#fff7ed; color:#c2410c; border-color:#ffedd5;">Senior Courier</p>
            
            <div class="profile-nav">
                <a href="{{ url_for('lab5') }}" class="btn-tech-outline nav-sidemenu-item">
                    <span class="menu-icon">‚¨ÖÔ∏è</span> Exit Lab
                </a>
                <a href="{{ url_for('lab5_2_b') }}" class="btn-tech-outline nav-sidemenu-item">
                    <span class="menu-icon">üöö</span> Run Sheet
                </a>
                <a href="#" class="btn-tech-outline nav-sidemenu-item nav-sidemenu-active" style="border-color:#fb923c; background:#ffedd5; color:#c2410c;">
                    <span class="menu-icon">üì±</span> App Settings
                </a>
                <a href="{{ url_for('lab5_2_b_logout') }}" class="btn-tech-outline nav-sidemenu-item nav-sidemenu-danger">
                    <span class="menu-icon">üõë</span> End Shift
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="profile-main">
        <div class="glass content-card">
            <div class="content-header">
                <div>
                    <h1 class="content-title">Proof of Delivery Config</h1>
                    <p class="auth-subtitle">Update your signature stamp image.</p>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="upload-section">
                <h3 class="section-title">
                    <span class="section-icon" style="color:#ea580c; background:#ffedd5; border-color:#fed7aa;">‚úçÔ∏è</span> 
                    Update Signature Stamp
                </h3>

                {% if message %}
                <div class="upload-message-success">
                    {{ message }}
                </div>
                {% endif %}
                
                {% if error %}
                <div class="upload-message-error">
                    {{ error }}
                </div>
                {% endif %}

                <form action="{{ url_for('lab5_2_b_upload') }}" method="POST" enctype="multipart/form-data">
                    <div class="upload-zone" onclick="document.getElementById('avatar-input').click()">
                        <div class="upload-placeholder-icon" style="color:#fdba74;">üì§</div>
                        <p class="upload-text-main">Select Signature Image</p>
                        <p class="upload-text-sub">System accepts verified image formats only.</p>
                        <input type="file" name="avatar" id="avatar-input" class="d-none" onchange="this.form.submit()">
                    </div>
                    
                    <div class="upload-actions">
                        <button type="button" class="btn-upload-primary" onclick="document.getElementById('avatar-input').click()">
                            <span>‚¨ÜÔ∏è</span> Upload Stamp
                        </button>
                    </div>
                </form>
            </div>

            <!-- Read Only Info -->
            <div class="info-grid">
                <div class="form-group">
                    <label class="form-label">Route ID</label>
                    <input type="text" class="form-input input-readonly" value="GL-8842-NY" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Vehicle</label>
                    <input type="text" class="form-input input-readonly" value="Van 402" readonly>
                </div>
            </div>
            
        </div>
    </div>
</div>
{% endblock %}
