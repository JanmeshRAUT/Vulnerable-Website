{% extends 'base.html' %}
{% block title %}ShopHub - Your Online Marketplace{% endblock %}

{% block header %}
    <link rel="stylesheet" href="{{ url_for('static', filename='lab2/5/style.css') }}">
    <header class="shophub-header">
        <div class="header-container">
            <div class="brand-section">
                <a href="{{ url_for('lab2_5_menu') }}" class="back-link">&larr; Back</a>
                <div class="brand-logo">üõçÔ∏è ShopHub</div>
                <nav class="nav-links">
                    <a href="#" class="nav-item">Home</a>
                    <a href="#" class="nav-item">Categories</a>
                    <a href="#" class="nav-item">Deals</a>
                    <a href="#" class="nav-item">About</a>
                </nav>
            </div>
            <div class="header-actions">
                <input type="search" placeholder="Search products..." class="search-input">
                <button onclick="openLoginModal()" class="btn-login">Sign In</button>
            </div>
        </div>
    </header>
{% endblock %}

{% block content %}
    <!-- Hero Banner -->
    <div class="store-hero">
        <h1 class="hero-title">Flash Sale - 70% Off!</h1>
        <p class="hero-subtitle">Limited time offer on selected items. Don't miss out on the biggest sale of the season.</p>
        <button class="btn-hero">Shop Deals</button>
    </div>

    <!-- Categories -->
    <h2 class="section-title" style="text-align: center; justify-content: center;">Shop by Category</h2>
    <div class="category-grid">
        <div class="category-card">
            <div class="category-icon">üëï</div>
            <p class="category-name">Fashion</p>
        </div>
        <div class="category-card">
            <div class="category-icon">üì±</div>
            <p class="category-name">Electronics</p>
        </div>
        <div class="category-card">
            <div class="category-icon">üè†</div>
            <p class="category-name">Home</p>
        </div>
        <div class="category-card">
            <div class="category-icon">‚öΩ</div>
            <p class="category-name">Sports</p>
        </div>
        <div class="category-card">
            <div class="category-icon">üìö</div>
            <p class="category-name">Books</p>
        </div>
        <div class="category-card">
            <div class="category-icon">üéÆ</div>
            <p class="category-name">Gaming</p>
        </div>
    </div>

    <!-- Featured Products -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; max-width: 1200px; margin-left: auto; margin-right: auto; padding: 0 2rem;">
        <h2 class="section-title" style="margin: 0;">Featured Products</h2>
        <div style="display: flex; gap: 0.5rem;">
            <button class="btn-action" style="padding: 0.5rem 1rem; font-size: 0.85rem; background: var(--bg-card); border: 1px solid var(--border); color: var(--text-muted);">All</button>
            <button class="btn-action" style="padding: 0.5rem 1rem; font-size: 0.85rem;">Best Sellers</button>
            <button class="btn-action" style="padding: 0.5rem 1rem; font-size: 0.85rem; background: var(--bg-card); border: 1px solid var(--border); color: var(--text-muted);">New</button>
        </div>
    </div>
    
    <div class="products-grid" style="padding: 0 2rem;">
        {% for product in products %}
        <div class="product-card">
            <div class="badge-sale">SALE</div>
            <div class="product-image">
                üõçÔ∏è
            </div>
            <div class="product-content">
                <h3 class="product-title">{{ product.name }}</h3>
                <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 0.5rem;">{{ product.description }}</p>
                <div class="product-rating">
                    <span style="color: #fbbf24;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                    <span style="color: var(--text-muted);">(245)</span>
                </div>
                <div class="product-footer">
                    <div class="price-box">
                        <span class="price-current">${{ product.price }}</span>
                        <span class="price-original">${{ product.price * 2 }}</span>
                    </div>
                    <button class="btn-add-cart">Add to Cart</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Benefits Section -->
    <div style="background: var(--bg-card); padding: 4rem 2rem; margin-top: 4rem; border-top: 1px solid var(--border);">
        <div style="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 3rem;">
            <div style="text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">üöö</div>
                <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem; color: var(--text-main);">Free Shipping</h3>
                <p style="font-size: 0.9rem; color: var(--text-muted);">On orders over $50</p>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">üîí</div>
                <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem; color: var(--text-main);">Secure Payment</h3>
                <p style="font-size: 0.9rem; color: var(--text-muted);">100% protected transactions</p>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">‚Ü©Ô∏è</div>
                <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem; color: var(--text-main);">Easy Returns</h3>
                <p style="font-size: 0.9rem; color: var(--text-muted);">30-day money back guarantee</p>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">üí¨</div>
                <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem; color: var(--text-main);">24/7 Support</h3>
                <p style="font-size: 0.9rem; color: var(--text-muted);">We are always here to help</p>
            </div>
        </div>
    </div>

    <!-- LOGIN MODAL -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-card">
            <button onclick="closeLoginModal()" class="modal-close">&times;</button>
            <h2 class="modal-title">Member Login</h2>
            
            {% if error %}
            <div id="errorMsg" class="error-message" style="display: block;">{{ error }}</div>
            {% else %}
            <div id="errorMsg" class="error-message"></div>
            {% endif %}

            <form action="{{ url_for('lab2_5_login') }}" method="POST">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" name="username" class="form-input" required placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" name="password" class="form-input" required placeholder="Enter your password">
                </div>
                <button type="submit" class="btn-action btn-block">Sign In</button>
                <div style="text-align: center; margin-top: 1.5rem; font-size: 0.85rem; color: var(--text-muted);">
                    Test account: <code style="margin: 0 0.3rem;">user</code> / <code style="margin: 0 0.3rem;">password</code>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer style="background: #0b1120; padding: 4rem 2rem; border-top: 1px solid var(--border); color: var(--text-muted);">
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 3rem; margin-bottom: 3rem;">
                <div>
                    <h3 style="color: white; margin-bottom: 1.5rem; font-size: 1.25rem;">ShopHub</h3>
                    <p style="font-size: 0.9rem; line-height: 1.6;">Your trusted online marketplace for quality products at great prices. Secure, fast, and reliable.</p>
                </div>
                <div>
                    <h3 style="color: white; margin-bottom: 1.5rem; font-size: 1rem;">Quick Links</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem; font-size: 0.9rem;">
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">About Us</a>
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">Contact</a>
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">Terms & Conditions</a>
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">Privacy Policy</a>
                    </div>
                </div>
                <div>
                    <h3 style="color: white; margin-bottom: 1.5rem; font-size: 1rem;">Customer Service</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem; font-size: 0.9rem;">
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">Help Center</a>
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">Track Order</a>
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">Returns & Exchanges</a>
                        <a href="#" style="color: inherit; text-decoration: none; transition: color 0.2s;">Shipping Info</a>
                    </div>
                </div>
                <div>
                    <h3 style="color: white; margin-bottom: 1.5rem; font-size: 1rem;">Subscribe</h3>
                    <p style="font-size: 0.9rem; margin-bottom: 1rem;">Get the latest updates and offers.</p>
                    <div style="display: flex; gap: 0.5rem;">
                        <input type="email" placeholder="Your email" style="padding: 0.6rem; border-radius: 0.5rem; border: 1px solid var(--border); background: rgba(255,255,255,0.05); color: white; flex: 1;">
                        <button style="background: var(--primary); color: white; border: none; padding: 0.6rem 1rem; border-radius: 0.5rem; cursor: pointer;">Join</button>
                    </div>
                </div>
            </div>
            <div style="text-align: center; padding-top: 2rem; border-top: 1px solid var(--border); font-size: 0.85rem;">
                <p>&copy; 2026 ShopHub Inc. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        function openLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.style.display = 'flex';
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeLoginModal() {
            const modal = document.getElementById('loginModal');
            modal.classList.remove('active');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        // Auto-open modal if error exists
        {% if error %}
        openLoginModal();
        {% endif %}

        // Close on outside click
        document.getElementById('loginModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeLoginModal();
            }
        });
    </script>
{% endblock %}
