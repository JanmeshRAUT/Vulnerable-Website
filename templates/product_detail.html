{% extends 'base.html' %}
{% block title %}{{ product.name }} - RESEARCH_OPS Shop{% endblock %}

{% block content %}
<!-- Breadcrumb Navigation -->
<div class="breadcrumb">
    <a href="{{ url_for('home') }}">RESEARCH_OPS</a>
    <span>/</span>
    <a href="{{ url_for('product_list') }}">Catalog</a>
    <span>/</span>
    <span>{{ product.name }}</span>
</div>

<!-- Product Main Section -->
<div class="product-main">
    <div class="product-image-container">
        <div class="product-image-main">üõçÔ∏è</div>
        <div class="product-image-thumbnails">
            <div class="product-thumbnail">üõçÔ∏è</div>
            <div class="product-thumbnail">üì¶</div>
            <div class="product-thumbnail">‚ú®</div>
        </div>
    </div>

    <div class="product-details">
        <h1 class="product-title">{{ product.name }}</h1>

        <div class="product-rating">
            <span class="product-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
            <span>(324 reviews)</span>
            <span class="rating-divider">|</span>
            <span class="verified-badge">‚úì Verified Purchase Badge</span>
        </div>

        <div class="product-price-large">${{ "%.2f"|format(product.price) }}</div>

        {% if product.stock > 0 %}
        <div class="product-stock-badge">
            ‚úì In Stock ({{ product.stock }} units available)
        </div>
        {% else %}
        <div class="product-stock-badge out">
            Out of Stock
        </div>
        {% endif %}

        <div class="product-description">
            {{ product.description }}
        </div>

        <!-- Product Specifications -->
        <div class="product-specs">
            <div class="spec-item">
                <div class="spec-label">Category</div>
                <div class="spec-value">Research Tools</div>
            </div>
            <div class="spec-item">
                <div class="spec-label">Availability</div>
                <div class="spec-value">{{ "In Stock" if product.stock > 0 else "Out of Stock" }}</div>
            </div>
            <div class="spec-item">
                <div class="spec-label">Manufacturer</div>
                <div class="spec-value">RESEARCH_OPS Inc.</div>
            </div>
            <div class="spec-item">
                <div class="spec-label">SKU</div>
                <div class="spec-value">prod-{{ product.id }}</div>
            </div>
        </div>

        <!-- Add to Cart Section -->
        {% if product.stock > 0 %}
        <div class="add-to-cart-container">
            <div class="quantity-selector product-quantity">
                <button class="quantity-btn" onclick="this.parentElement.querySelector('input').value = Math.max(1, parseInt(this.parentElement.querySelector('input').value) - 1)">‚àí</button>
                <input class="quantity-input" type="number" value="1" min="1" max="{{ product.stock }}">
                <button class="quantity-btn" onclick="this.parentElement.querySelector('input').value = Math.min({{ product.stock }}, parseInt(this.parentElement.querySelector('input').value) + 1)">+</button>
            </div>
            <button class="btn add-btn" onclick="addToCart({{ product.id }})">Add to Cart</button>
            <button class="wishlist-btn" onclick="addToWishlist({{ product.id }})">‚ô° Wishlist</button>
        </div>
        {% endif %}

        <!-- Trust Badges -->
        <div class="product-trust-badges">
            <div class="trust-badge">
                <div class="trust-badge-icon">üöö</div>
                <div class="trust-badge-title">Free Shipping</div>
                <div class="trust-badge-subtitle">on orders over $50</div>
            </div>
            <div class="trust-badge">
                <div class="trust-badge-icon">üîê</div>
                <div class="trust-badge-title">Secure Checkout</div>
                <div class="trust-badge-subtitle">SSL Protected</div>
            </div>
            <div class="trust-badge">
                <div class="trust-badge-icon">‚Ü©Ô∏è</div>
                <div class="trust-badge-title">Easy Returns</div>
                <div class="trust-badge-subtitle">30-day guarantee</div>
            </div>
        </div>
    </div>
</div>

<!-- Related Products Section -->
<div class="related-products">
    <h2>Related Products</h2>
    <div class="card-grid">
        <div class="product-card">
            <div class="product-image">üì¶</div>
            <div class="product-info">
                <div class="product-name">Insecure Hoodie</div>
                <div class="product-desc">Similar security research tool</div>
                <div class="product-footer">
                    <div class="product-price">$49.99</div>
                </div>
            </div>
        </div>
        <div class="product-card">
            <div class="product-image">‚òï</div>
            <div class="product-info">
                <div class="product-name">SQLi Mug</div>
                <div class="product-desc">Essential research companion</div>
                <div class="product-footer">
                    <div class="product-price">$15.00</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function addToCart(productId) {
    const quantityInput = document.querySelector('.quantity-input');
    const quantity = parseInt(quantityInput.value);
    
    // For now, just show a message
    alert('Added ' + quantity + ' item(s) to cart!');
    
    // In the future, this would make an AJAX request to the backend
    console.log('Adding to cart:', productId, quantity);
}

function addToWishlist(productId) {
    alert('Added to your wishlist!');
    console.log('Added to wishlist:', productId);
}
</script>
{% endblock %}